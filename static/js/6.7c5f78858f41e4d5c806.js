webpackJsonp([6],{CCUp:function(t,e,a){"use strict";e.c=function(t){return Object(s.a)({url:"/company",method:"Post",params:t})},e.a=function(t){return Object(s.a)({url:"/company/add",method:"Post",data:t})},e.b=function(t){return Object(s.a)({url:"/company/update",method:"post",data:t})};var s=a("vLgD")},JYqX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("//Fk"),i=a.n(s),n={name:"vue-web-cam",data:function(){return{source:null,canvas:null,camerasListEmitted:!1,cameras:[]}},props:{width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:500},autoplay:{type:Boolean,default:!0},screenshotFormat:{type:String,default:"image/jpeg"},deviceId:{type:String,default:null},playsinline:{type:Boolean,default:!0}},watch:{deviceId:function(t){this.changeCamera(t)}},mounted:function(){this.setupMedia()},methods:{legacyGetUserMediaSupport:function(){return function(t){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;return e?new i.a(function(a,s){e.call(navigator,t,a,s)}):i.a.reject(new Error("getUserMedia is not implemented in this browser"))}},setupMedia:function(){void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=this.legacyGetUserMediaSupport()),this.testMediaAccess()},loadCameras:function(){var t=this;navigator.mediaDevices.enumerateDevices().then(function(e){for(var a=0;a!==e.length;++a){var s=e[a];"videoinput"===s.kind&&t.cameras.push(s)}}).then(function(){t.camerasListEmitted||(t.$emit("cameras",t.cameras),t.camerasListEmitted=!0)}).catch(function(e){return t.$emit("notsupported",e)})},changeCamera:function(t){this.stop(),this.$emit("camera-change",t),this.loadCamera(t)},loadSrcStream:function(t){"srcObject"in this.$refs.video?this.$refs.video.srcObject=t:this.source=window.HTMLMediaElement.srcObject(t),this.$emit("started",t)},stopStreamedVideo:function(t){var e=this,a=t.srcObject;a.getTracks().forEach(function(t){t.stop(),e.$emit("stopped",a),e.$refs.video.srcObject=null,e.source=null})},stop:function(){null!==this.$refs.video&&this.$refs.video.srcObject&&(this.stopStreamedVideo(this.$refs.video),console.log("关闭了吗/?"))},start:function(){this.deviceId&&this.loadCamera(this.deviceId)},testMediaAccess:function(){var t=this;navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){return t.loadCameras()}).catch(function(e){return t.$emit("error",e)})},loadCamera:function(t){var e=this;navigator.mediaDevices.getUserMedia({video:{deviceId:{exact:t}}}).then(function(t){return e.loadSrcStream(t)}).catch(function(t){return e.$emit("error",t)})},capture:function(){return this.getCanvas().toDataURL(this.screenshotFormat)},getCanvas:function(){var t=this.$refs.video;if(!this.ctx){var e=document.createElement("canvas");e.height=t.videoHeight,e.width=t.videoWidth,this.canvas=e,this.ctx=e.getContext("2d")}var a=this.ctx,s=this.canvas;return a.drawImage(t,0,0,s.width,s.height),s}}},o={render:function(){var t=this.$createElement;return(this._self._c||t)("video",{ref:"video",attrs:{width:this.width,height:this.height,src:this.source,autoplay:this.autoplay,playsinline:this.playsinline}})},staticRenderFns:[]},r=a("VU/8")(n,o,!1,null,null,null).exports,c=a("M4fF"),l=this,d={components:{WebCam:r},data:function(){return{Visible:!1,img:null,camera:null,deviceId:null,devices:[]}},computed:{device:function(){return Object(c.find)(l.devices,function(t){return t.deviceId===l.deviceId})}},watch:{camera:function(t){this.deviceId=t},devices:function(){var t=Object(c.head)(this.devices);t&&(this.camera=t.deviceId,this.deviceId=t.deviceId,console.log(this.device))}},props:["submit"],methods:{close:function(){this.onStop()},onCapture:function(){this.img=this.$refs.webcam.capture(),console.log(this.img)},onStarted:function(t){console.log("On Started Event",t)},onStopped:function(t){console.log("On Stopped Event",t)},onStop:function(){this.$refs.webcam.stop()},onStart:function(){this.$refs.webcam.start()},onError:function(t,e){console.log("On Error Event",t,e)},onCameras:function(t){this.devices=t,console.log("On Cameras Event",t)},onCameraChange:function(t){this.deviceId=t,this.camera=t,console.log("On Camera Change Event",t)},cancle:function(){this.Visible=!this.Visible,this.onStop()},clear:function(){this.Visible=!1}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"拍照框",visible:t.Visible,width:"600px",close:"close"},on:{"update:visible":function(e){t.Visible=e}}},[a("web-cam",{ref:"webcam",attrs:{width:"550px",height:"500px",deviceId:t.deviceId},on:{started:t.onStarted,stopped:t.onStopped,error:t.onError,cameras:t.onCameras,"camera-change":t.onCameraChange}}),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.camera,expression:"camera"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.camera=e.target.multiple?a:a[0]}}},[a("option",[t._v("-- 选择摄像头 --")]),t._v(" "),t._l(t.devices,function(e){return a("option",{key:e.deviceId,domProps:{value:e.deviceId}},[t._v(t._s(e.label))])})],2),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancle}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var h=a("VU/8")(d,u,!1,function(t){a("MdhO")},null,null).exports,v=a("CCUp"),p={components:{TakePhoto:h},data:function(){return{editDialog:!1,addDialog:!1,company:{rowid:"",cname:"",tel:"",address:"",creatid:"",creatdate:"",updaid:"",updadate:"",remark:"",img:""},listQuery:{page:0,size:10},listLoading:!0,list:[],pageNum:0,pages:0,pageSize:0,size:0,total:0}},created:function(){this.getList()},methods:{takePhoto:function(){this.$refs.entry_takephoto.Visible=!0,this.$refs.entry_takephoto.onStart()},submit:function(){this.$refs.entry_takephoto.Visible=!1,this.$refs.entry_takephoto.onCapture(),this.company.img=this.$refs.entry_takephoto.img,this.$refs.entry_takephoto.onStop()},addClick:function(){this.addDialog=!0,this.company={cname:"",tel:"",address:"",creatid:"",creatdate:"",updaid:"",updadate:"",remark:""}},add:function(){var t=this;this.addDialog=!1,Object(v.a)(this.company).then(function(e){t.getList(),console.log("组件内数据"+e),t.$message({showClose:!0,message:"添加成功",type:"success"})})},handleDoubleClick:function(t,e){console.log(t),console.log(e),this.editDialog=!0,this.company=t},handleClick:function(t){this.editDialog=!0,this.company=t},updata:function(){var t=this;this.editDialog=!1,Object(v.b)(this.company).then(function(e){console.log("组件内数据"+e),t.$message({showClose:!0,message:"修改成功",type:"success"})})},getList:function(){var t=this;this.listLoading=!0,Object(v.c)(this.listQuery).then(function(e){t.list=e.data.list,t.pages=e.data.pages,t.pageSize=e.data.pageSize,t.total=e.data.total,t.pageNum=e.data.pageNum,console.log("获取列表"),console.log(e),t.listLoading=!1}).catch(function(e){console.log("组件内接受错误"+e),t.listLoading=!1})},handleSizeChange:function(t){this.listQuery.size=t,this.getList(),console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.listQuery.page=t,this.getList(),console.log("当前页: "+t)},prevClick:function(){++this.listQuery.size,this.getList()},nextClick:function(){--this.listQuery.size,this.getList()}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"手机号/卡号/姓名"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"}},[t._v("入场")]),t._v(" "),a("el-button",{attrs:{type:"success",icon:"search"}},[t._v("清场")]),t._v(" "),a("el-button",{attrs:{type:"warning",icon:"search"}},[t._v("访客来访")]),t._v(" "),a("el-button",{attrs:{type:"warning",icon:"search"}},[t._v("离场列表")])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:16}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,border:"",fit:"","highlight-current-row":""},on:{"row-dblclick":t.handleDoubleClick}},[a("el-table-column",{attrs:{label:"入场时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("parseTime")(e.row.creatdate,"{y}-{m}-{d} {h}:{i}")))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cname",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tel",label:"卡号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"卡种"}}),t._v(" "),a("el-table-column",{attrs:{prop:"creatid",label:"电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updaid",label:"手牌"}})],1)],1),t._v(" "),a("el-col",{staticClass:"rightinfo",attrs:{span:8}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("a",{on:{click:t.takePhoto}},[a("img",{staticClass:"img",attrs:{src:t.company.img}})])]),t._v(" "),a("el-col",{staticStyle:{},attrs:{span:12}},[a("h1",[t._v(" 唐博")]),t._v(" "),a("h4",[t._v(" 卡号")]),t._v(" "),a("h4",[t._v(" 卡种")]),t._v(" "),a("h4",[t._v(" 电话")])])],1),t._v(" "),a("el-row",{staticStyle:{background:"black"},attrs:{span:24}},[a("h2",{staticStyle:{width:"100%",color:"white","text-align":"center",padding:"5px"}},[t._v("基础信息")])]),t._v(" "),a("div",{staticStyle:{background:"#cdcdcd"}},[a("hr"),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])])],1),t._v(" "),a("hr"),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])])],1),t._v(" "),a("hr"),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])])],1),t._v(" "),a("hr"),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])])],1),t._v(" "),a("hr"),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])])],1),t._v(" "),a("hr"),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("h3",[t._v("归属门店")])])],1),t._v(" "),a("hr"),t._v(" "),a("el-row",[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"",value:"请输入fasdfasdfadsfasfasdfasdfasdfasdfasd内容请输入fasdfasdfadsfasfasdfasdfasdfasdfasd内容请输入fasdfasdfadsfasfasdfasdfasdfasdfasd内容请输入fasdfasdfadsfasfasdfasdfasdfasdfasd内容请输入fasdfasdfadsfasfasdfasdfasdfasdfasd内容"}})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px","text-align":"center"}},[a("el-col",{attrs:{span:6}},[a("h3",{staticStyle:{}},[t._v("水吧挂单")])]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"primary",icon:"search",size:"small"}},[t._v(" 结算")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-button",{attrs:{type:"warning",icon:"search"}},[t._v(" 离场")])],1)],1),t._v(" "),a("div",{staticStyle:{height:"20px"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.total,"page-sizes":[10,15,20,50],"page-size":t.size,"current-page":t.pageNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"prev-click":t.prevClick,"next-click":t.nextClick}})],1)],1),t._v(" "),a("take-photo",{ref:"entry_takephoto",attrs:{submit:t.submit}})],1)},staticRenderFns:[]};var m=a("VU/8")(p,f,!1,function(t){a("plWA")},"data-v-74e1e850",null);e.default=m.exports},MdhO:function(t,e){},plWA:function(t,e){}});
//# sourceMappingURL=6.7c5f78858f41e4d5c806.js.map